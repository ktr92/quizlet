import{_ as M}from"./Title.vue.8bd6c43c.js";import A from"./Icon.e1f6f755.js";import{_ as P}from"./Iconbutton.vue.e4a6a3d2.js";import{_ as W}from"./Button.vue.17ced2eb.js";import{_ as G}from"./Loading.5df64747.js";import{_ as H}from"./Errors.vue.bc7a76da.js";import{u as O,_ as X}from"./Input.vue.916b0df8.js";import{c as J,a as K,_ as Q}from"./index.esm.3d2d93f0.js";import{f as Y,g as Z,r as p,l as ee,n as te,o as l,c as w,a as o,b as _,w as b,m as t,q as g,s as oe,F as S,v as T,x as se,d as U,y as ae}from"./entry.ff4e4d2d.js";import{u as ne}from"./fetch.85b6bac0.js";import"./config.7144edff.js";import"./defu.5a7c1433.js";import"./useTailwindConfig.8c6cfb4f.js";const le={class:""},re={class:"md:text-5xl text-primary-800 dark:text-white font-bold flex justify-between items-center"},ie={class:"flex items-center"},de={class:"ml-1 md:ml-4"},ue={for:"fileupload"},me={class:"bg-white dark:bg-gray-700 rounded-lg"},ce={class:"flex justify-between px-4 py-2"},pe=o("div",null,null,-1),_e=["onClick"],fe={class:"flex mb-4 pb-4 flex-wrap md:flex-nowrap"},ve={class:"px-2 w-full md:w-[50%] md:mr-2"},he={class:"px-2 w-full md:w-[50%] md:ml-2"},Re=Y({__name:"add",setup(we){const E=Z(),y=p(""),V=p([]),d=p(0),s=p([{dt:"",dd:"",count:0,id:String(Date.now()+d.value+Math.random())}]),F=()=>{d.value++,s.value.push({dt:"",dd:"",count:d.value,id:String(Date.now()+d.value+Math.random())})},R=a=>{I.value>1&&s.value.splice(a,1)},I=ee(()=>s.value.length),j=()=>{},$=p(""),B=a=>{u.value=!0;function e(r){new Promise((m,q)=>{let h=new FileReader;h.onload=x=>{m($.value=h.result)},h.readAsText(r)}).then(m=>{z()},m=>{f.value="File upload error! "+m}).finally(()=>{u.value=!1})}if(a.target){var n=a.target.files||a.dataTransfer.files;if(!n.length)return;e(n[0])}},z=()=>{s.value=[];const e=$.value.split(`\r
`).map(r=>{let v=r.split(",");return{dt:v[0],dd:v[1]}}),n=[];e.forEach(r=>{d.value++,n.push({dt:r.dt,dd:r.dd,count:d.value,id:String(Date.now()+d.value+Math.random())})}),s.value=n},N=J().shape({ctitle:K().required("Enter a title").min(1).max(100)}),{handleSubmit:D,errors:ge}=O({validationSchema:N}),u=p(!1),f=p(""),C=D(async()=>{await ne("/api/prisma/create-item",{method:"POST",body:{user:E.value.id,title:y.value,description:[...V.value],words:[...s.value]},onRequest({request:a,options:e}){u.value=!0},onRequestError({request:a,options:e,error:n}){f.value="Request error! "+n.message},onResponse({request:a,response:e,options:n}){u.value=!1,console.log(e._data.title)},onResponseError({request:a,response:e,options:n}){u.value=!1,f.value="Response error! "+e.statusText}},"$dUFXpG9hwq"),te("/user/courses/")},()=>{console.log("fail")});return(a,e)=>{const n=M,r=A,v=P,m=W,q=G,h=H,x=X,L=Q;return l(),w("div",null,[o("div",le,[o("div",re,[_(n,null,{default:b(()=>[U(" Creating a new course ")]),_:1}),o("div",ie,[o("div",de,[o("label",ue,[_(v,{onSomeEvent:j,tooltip:"Import",classes:"mr-4 w-12 h-12 md:!p-0 flex items-center justify-center",type:"round"},{default:b(()=>[_(r,{name:"bx:import",size:"30"}),o("input",{type:"file",id:"fileupload",onChange:B,class:"hidden"},null,32)]),_:1})])]),!t(u)&&!t(f).length?(l(),g(m,{key:0,class:"",size:"lg",rounded:!0,onClick:t(C)},{default:b(()=>[U("Create")]),_:1},8,["onClick"])):oe("",!0)])])]),t(u)?(l(),g(q,{key:0})):(l(),w(S,{key:1},[t(f).length?(l(),g(h,{key:0,errors:t(f)},null,8,["errors"])):(l(),w("form",{key:1,onSubmit:e[2]||(e[2]=(...i)=>t(C)&&t(C)(...i))},[_(x,{modelValue:t(y),"onUpdate:modelValue":e[0]||(e[0]=i=>T(y)?y.value=i:null),placeholder:"Course title",name:"ctitle"},null,8,["modelValue"]),_(L,{modelValue:t(V),"onUpdate:modelValue":e[1]||(e[1]=i=>T(V)?V.value=i:null),options:["Hello","World"],showCount:!0},null,8,["modelValue"]),(l(!0),w(S,null,se(t(s),(i,c)=>(l(),w("div",{class:"my-4",key:i.id},[o("div",me,[o("div",ce,[pe,o("div",null,[o("div",{onClick:k=>R(c),class:ae(["cursor-pointer",{"opacity-30":t(I)<2}])},[_(r,{name:"pajamas:remove",size:"20"})],10,_e)])]),o("div",fe,[o("div",ve,[(l(),g(x,{key:i.id,modelValue:t(s)[c].dt,"onUpdate:modelValue":k=>t(s)[c].dt=k,placeholder:"Term",name:`newitems[${c}].dt`},null,8,["modelValue","onUpdate:modelValue","name"]))]),o("div",he,[(l(),g(x,{key:i.id,modelValue:t(s)[c].dd,"onUpdate:modelValue":k=>t(s)[c].dd=k,placeholder:"Value",name:`newitems[${c}].dd`},null,8,["modelValue","onUpdate:modelValue","name"]))])])])]))),128)),o("div",{class:"my-8",onClick:F},[_(m,{liquid:!0,rounded:!0,type:"clear"},{default:b(()=>[U("Add new word")]),_:1})])],32))],64))])}}});export{Re as default};
